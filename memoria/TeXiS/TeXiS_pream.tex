%---------------------------------------------------------------------
%
%                        TeXiS_pream.tex
%
%---------------------------------------------------------------------
%
% TeXiS_pream.tex
% Copyright 2009 Marco Antonio Gomez-Martin, Pedro Pablo Gomez-Martin
%
% This file belongs to TeXiS, a LaTeX template for writting
% Thesis and other documents. The complete last TeXiS package can
% be obtained from http://gaia.fdi.ucm.es/projects/texis/
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainers of this work are Marco Antonio Gomez-Martin
% and Pedro Pablo Gomez-Martin
%
%---------------------------------------------------------------------
%
% Contiene la parte inicial del documento, antes del
% \begin{document}. Carga los paquetes que se utilizarï¿½n.
%
%---------------------------------------------------------------------

% El paquete verbatim  es utilizado por uno de  los comandos definidos
% en TeXiS.  Aunque  el propio estilo indica que  necesita ese paquete
% con \RequirePackage, lo  hacemos "explï¿½cito" incluyï¿½ndolo aquï¿½ antes
% de incluir nuestro paquete.  Es necesario ï¿½nicamente para el comando
% "example",  especï¿½fico del  manual y  que con  toda seguridad  no se
% necesitarï¿½ en  ningï¿½n otro tipo  de documento (Tesis, etc.),  por lo
% que si por alguna razï¿½n  la inclusiï¿½n de este paquete interfiere con
% otros y se desea no tener que incluirlo, se puede cambiar TeXiS.sty,
% y eliminar el comando example.
\usepackage{verbatim}

% El  paquete  "layout" es  de  "depuraciï¿½n".  Sirve  para definir  el
% comando \layout que puedes meter  en cualquier sitio del documento y
% te genera  un par de pï¿½ginas  con un grï¿½fico sobre  la estructura de
% las  pï¿½ginas,   es  decir,  con  informaciï¿½n   sobre  los  mï¿½rgenes,
% posiciones de las notas a pie, los encabezados, y demï¿½s. Recibe como
% parï¿½metro un  idioma que  le sirve para  mostrar "la leyenda"  en un
% idioma diferente al inglï¿½s.

%\usepackage[spanish]{layout}

% El  paquete  glosstex  te  permite  generar listas  de  acrï¿½nimos  y
% glosarios.  En  realidad  te   permite  crear  listas  mï¿½ltiples  de
% cualquier cosa,  con tal de que  des un identificador  a cada lista.
% Luego de  manera predeterminada controla  dos listas, una  de nombre
% "acr" pensada para acrï¿½nimos, y otra "glo" para el glosario.

%
% La idea  es tener uno o  varios ficheros externos  donde se mantiene
% una "base  de datos" de acrï¿½nimos,  de palabras para  el glosario, o
% de, en  general, entradas  para cualquiera de  la lista  de tï¿½rminos
% gestionadas por glosstex. Esos ficheros normalmente llevan extensiï¿½n
% .gdf (Glossary  Data File, supongo),  y, por aclarar,  son similares
% conceptualmente a  los ficheros .bib. En cada  entrada se especifica
% una etiqueta que  la identifica y que normalmente  se utiliza cuando
% aparece dicha entrada en alguna de las listas en el documento final.
% Tambiï¿½n  puede opcionalmente  especificarse un  texto en  LaTeX para
% dicha entrada si  queremos poner otra o darle  formato (por ejemplo,
% si  queremos meter  en  el glosario  el  tï¿½rmino LaTeX,  normalmente
% querremos usar  como etiqueta  identificativa la cadena  LaTeX, pero
% luego queremos  que al escribirlo  en el documento salga  su versiï¿½n
% pija conseguida  mediante \LaTeX{}). Tambiï¿½n  tiene una "descripciï¿½n
% larga"  (ï¿½til dependiendo  de  la configuraciï¿½n)  y, finalmente,  la
% descripciï¿½n de la entrada.
%
%
% Por ejemplo, una entrada sin descripciï¿½n corta serï¿½a:
%
%   @entry{LaTeX, \LaTeX{}} Herramienta basada en \TeX{} para
%   facilitar la creaciï¿½n de documentaciï¿½n.
%

% Puedes consultar  mï¿½s informaciï¿½n sobre  el formato en  el fichero
% acronimos.gdf.

% La idea es tener tantos ficheros gdf como queramos, y reutilizarlos
% entre todos los documentos que necesitemos crear. Posteriormente, a
% lo largo de esos documentos, referenciamos su uso. En concreto,
% indicamos al sistema que queremos que una determinada entrada se
% incluya en una de las listas gestionadas por GlossTeX.
%
% Para eso:
%
%  \glosstex[(<lista>)]{<etiqueta>}
%
% Lo de <lista> es opcional. Si no se especifica, se entiende "glo",
% que se supone que contiene el glosario normal. El soporte "nativo"
% para la lista de acrï¿½nimos queda patente porque para aï¿½adir uno
% basta con:
%
%  \acronym{<etiqueta>}
%
% que es sinï¿½nimo de \glosstex(acr){<etiqueta>}
%
% La  apariciï¿½n   de  estos   comandos  ocasionan  la   generaciï¿½n  de
% anotaciones en los ficheros .aux correspondientes. Esos .aux hay que
% procesarlos con la herramienta  glosstex, que genera un fichero .gxs
% con informaciï¿½n  sobre las entradas referenciadas y  su contenido, y
% un .gxg con un log. El .gxs (si todo fue bien) es procesado de nuevo
% para ser  ordenado y para aplicarle  estilo. Esto se  realiza con la
% herramienta externa  makeindex, y usando el  estilo glosstex.ist. El
% resultado es un  fichero .glx, que por fin  tiene todo correcto. Ese
% fichero es  utilizado por el comando \printglosstex  dentro de algï¿½n
% fichero .tex en la proxima invocaciï¿½n a LaTeX
%
% Una cosa interesante es en el uso de acrï¿½nimos. Al igual que podemos
% utilizar  con natbib cosas  como \citeyear  o \citeauthor,  con esto
% podemos  hacer \ac{<etiqueta>},  y el  sistema te  pone  el acrï¿½nimo
% automï¿½ticamente.  Esto  no  parece   muy  ï¿½til,  si  se  piensa  que
% normalmente el  acrï¿½nimo serï¿½ igual a  la etiqueta ;-)  La gracia es
% que, ademï¿½s,  la primera vez que  se hace, te  pone entre parï¿½ntesis
% tambiï¿½n la forma larga 8-)
%
% Tambiï¿½n puedes usar \acf si quieres  que te aparezca las siglas y el
% significado  entre  parï¿½ntesis en  algï¿½n  momento.  En realidad  hay
% muchas mï¿½s cosas, pero no las he mirado todas.
%
% http://www.ctan.org/tex-archive/help/Catalogue/entries/glosstex.html
\ifx\generaacronimos\undefined
  % No queremos acrï¿½nimos. Como no incluiremos el paquete glosstex
  % redefinimos sus comandos para que no cruja si se han usado.
  \newcommand{\glosstex}[1]{}
  \newcommand{\acronym}[1]{}
  \newcommand{\ac}[1]{#1}
  \newcommand{\acs}[1]{#1}
  \newcommand{\acl}[1]{#1}
  \newcommand{\acf}[1]{#1}
\else
  \usepackage{glosstex}
\fi

% shortvrb supuestamente define algunas macros cï¿½modas como carï¿½cteres
% de escape.  Por ejemplo, para poner  un < normalmente  hay que hacer
% una  ecuaciï¿½n:   $<$.  Este   paquete  define  algunas   macros  mï¿½s
% intuitivas, en este caso bastarï¿½a  con \< De igual forma, para poner
% algo en  verbatim, la versiï¿½n  larga es \texttt{blabla},  la versiï¿½n
% corta es  \verb+blabla+ (el +  puede sustituirse por  cualquier otra
% cosa,  como un  |  ), y  con  este paquete  basta  con |blabla|  (es
% equivalente a \verb|blabla|).  Pero vamos... a mï¿½ no me funciona :-/

\usepackage{shortvrb}

% Modifica la codificaciï¿½n de  entrada para LaTeX. Bï¿½sicamente permite
% escribir cosas con acentos (ï¿½) y  ï¿½l solo lo sustituye por \'a. Para
% eso, se especifica  en el primer parï¿½metro la  pï¿½gina de cï¿½digos que
% estamos utilizando (latin1  significa ISO Latin 1, o  sea ISO 8859-1
% supongo). Para cada pï¿½gina de cï¿½digos (en nuestro caso latin1) tiene
% un fichero de definiciones (.def)  en el que mapea cada carï¿½cter por
% encima del 128 a una orden LaTeX.
%
% Otra posible opciï¿½n serï¿½a indicar utf8 (o utf8x) en lugar de latin1,
% que podrï¿½a  resultar ï¿½til para  aquellos que prefieran  escribir sus
% fuentes  en  UTF-8 (como  tiende  a  ocurrir  actualmente de  manera
% predeterminada  en  Ubuntu). No  obstante,  una  bï¿½squeda rï¿½pida  en
% google parece indicar  que el soporte para fuentes  TeX con UTF-8 no
% estï¿½ demasiado  bien soportado y  podrï¿½a dar algunos  problemas.  En
% TeXiS, ademï¿½s, seguro que generarï¿½ conflictos, dado que si se indica
% aquï¿½ utf8  se asumirï¿½ que  *todo* usa UTF-8, incluï¿½dos  los ficheros
% del propio  TeXiS que en realidad  estï¿½n con ISO  8859-1. Por tanto,
% usa  utf8  *bajo tu  propia  responsabilidad*.  TeXiS, desde  luego,
% recomienda el uso de ISO 8859-1.

\usepackage[latin1]{inputenc}

\usepackage{eurosym}

% Incluimos el  estilo de bibliografï¿½a natbib, para  poder citarlas de
% forma mï¿½s compleja.  Por ejemplo,  \citep{ref} para que nos lo saque
% entre  parï¿½ntesis, \citet{ref}  normal  (si lo  referenciamos en  un
% texto), \citeyear{ref} para la  fecha del artï¿½culo, libro, etcï¿½tera,
% \citeauthor{ref} para los autores... Hay un montï¿½n de posibilidades.
% Puedes ver informaciï¿½n en http://merkel.zoneo.net/Latex/natbib.php
%
% Es importante incluirlo ANTES de  babel. Si primero se aï¿½ade babel y
% luego natbib,  cuando se tienen apellidos  "compuestos" (por ejemplo
% "Du  Boulay" natbib  aï¿½ade  un  ~ de  separaciï¿½n  para convertir  al
% espacio  en un espacio  no separable  en dos  lï¿½neas, pero  al tener
% activado  babel  el ~  aparece  en lugar  de  salir  el espacio.  En
% cualquier  caso,  sigue  existiendo  un potencial  problema.  Natbib
% abrevia los  nombres poniendo ï¿½nicamente las  iniciales (por ejemplo
% para  el nombre  compuesto Francisco  Nunes Ferreira  pone Ferreira,
% F. N.). El  problema es que tambiï¿½n pone la ~  para separar, de modo
% que sale Ferreira F.ï¿½. El problema estï¿½ en que Babel automï¿½ticamente
% da significado  a ~n y lo  sustituye sin que le  digamos nada... hay
% mï¿½s  informaciï¿½n en  el comentario  de babel  y  en TeXiS_bib.tex
% http://chico.rediris.es/cgi-bin/wa?A2=ind0601&L=es-tex&D=0&P=1989

%\usepackage[round]{natbib}
\usepackage{natbib}

% Activa el  uso de  espaï¿½ol. Babel es  un paquete bastante  gordo que
% afecta a  otros paquetes de  LaTeX que antes tenï¿½an  cableadas cosas
% para el inglï¿½s... por ejemplo, hace  que la 'ï¿½' vaya despuï¿½s de la N
% en el orden alfabï¿½tico, y cosas varias sobre espaï¿½ol.
% En algï¿½n sitio leï¿½ que "activeacute" nos permite poner ï¿½ en lugar de
% tener que escribir  \'a ... aunque eso en teorï¿½a  lo hace el paquete
% inputenc :-m

\usepackage[spanish,activeacute]{babel}

% El paquete url sirve para poder  poner direcciones Web y no morir en
% el intento,  sobre todo  en la bibliografï¿½a.   Es ï¿½til porque  si la
% direcciï¿½n  no entra  en una  lï¿½nea,  la divide  de forma  coherente.
% Ademï¿½s en  la bibliografï¿½a tambiï¿½n  cambia el formato de  la fuente.
% Se utiliza poniendo la  direcciï¿½n con \url{http://...}  Tambiï¿½n vale
% para direcciones de correo, etc.
% No conviene  quitarlo, porque con  casi toda seguridad, al  menos la
% bibliografï¿½a utilizarï¿½ el comando.

\usepackage{url}

% El documento estï¿½  pensado para ser compilado o  bien con pdflatex o
% bien con  latex. Algunas  cosas sï¿½lo se  soportan si se  compila con
% pdflatex (por  ejemplo, aï¿½adir en  el "ï¿½ndice del documento"  PDF un
% tï¿½tulo para una secciï¿½n para luego verlo cuando se ve en el visor de
% PDF el  ï¿½ndice). Para  meter cï¿½modamente las  lï¿½neas que  sï¿½lo deben
% "ejecutarse" si  se compila el  documento con pdflatex  definimos un
% nuevo "tipo de if".
% En  realidad,  en vez  de  utilizar  el  paquete, se  puede  definir
% directamente, utilizando:
% \newif\ifpdf\ifx\pdfoutput\undefined\pdffalse\else\pdfoutput=1\pdftrue\fi
%
% La idea es luego poder tener:
% \ifpdf ...
% \else
% ...
% \fi

\usepackage{ifpdf}

% Juego (solo make latex) :-p
%\usepackage[mirror,invert]{crop}

% Si estamos usando  pdflatex, queremos pedir que se  creen enlaces en
% las  referencias  a figuras,  capï¿½tulos  y  bibliografï¿½a para  poder
% "navegar" al visualizar el PDF. Tambiï¿½n queremos que esos enlaces NO
% aparezcan rodeados de un marco que queda horrible.
%
% La opciï¿½n "pdfpagelabels"  sirve para que en el  cuadrito del nï¿½mero
% de pï¿½gina del Adobe Acrobat  salga el nï¿½mero de "pï¿½gina lï¿½gico", por
% ejemplo  "v (5  de  180)"  (con nï¿½mero  romano  porque al  principio
% empieza a numerarse asï¿½).

\ifpdf
   \RequirePackage[pdfborder={0 0 0},colorlinks,hyperindex,pdfpagelabels]{hyperref}
   \def\pdfBorderAttrs{/Border [0 0 0] } % Ningï¿½n borde en los enlaces
\fi

% Cuando se  genera el  ï¿½ndice, se necesita  el paquete  hyperref, que
% permite referencias  (o enlaces) en el propio  documento. El paquete
% aparece como \RequirePackage cuando se estï¿½ usando pdflatex, gracias
% al comando anterior. Si no se estï¿½ en pdf, se incluye directamente
\ifpdf
\else
\usepackage{hyperref}
\fi

\hypersetup{colorlinks=false}


% Durante  la infancia  de TeXiS  (es decir,  cuando estï¿½bamos  en las
% primeras etapas de la escritura de nuestras tesis), tenï¿½amos la idea
% de tener ï¿½ndice de palabras, es decir una lista de palabras usadas a
% lo   largo  del   documento,  junto   con  las   pï¿½ginas   donde  se
% mencionaban. Esto aparece en algunos libros, permitiendo la bï¿½squeda
% rï¿½pida de los lugares donde se habla de ciertas cosas.
%
% El problema  de hacer  dicho ï¿½ndice no  es sï¿½lo "tecnolï¿½gico"  en lo
% referente al  uso de  LaTeX, sino  tambiï¿½n a la  hora de  marcar quï¿½
% palabras (y en quï¿½ lugares) se quieren aï¿½adir a dicho ï¿½ndice.
%
% En nuestro  caso, despuï¿½s de haber superado  la barrera tecnolï¿½gica,
% decidimos que no  merecï¿½a la pena el esfuerzo  de recorrer las tesis
% tras  ser  escritas  para  anotar  las palabras  importantes  y  que
% aparecieran en el ï¿½ndice. Debido  a eso, ni siquiera el soporte estï¿½
% terminado  (a  nivel, por  ejemplo,  del  Makefile).  Por lo  tanto,
% podemos  decir que  TeXiS  tiene un  soporte  embrionario para  esas
% listas de palabras,  pero que necesitarï¿½a algo mï¿½s  de esfuerzo para
% hacerlo amigable.  Para no crear  falsas expectativas, el  manual de
% TeXiS, por  tanto, no menciona  nada de este asunto,  aunque dejamos
% aquï¿½ esa configuraciï¿½n original del soporte bï¿½sico.
%
% En realidad, para aï¿½adir un ï¿½ndice de palabras bastarï¿½a con:
%
%    - Modificar la parte final de Tesis.tex, e incluir siempre
%      TeXiS/TeXiS_indice (ahora su inclusiï¿½n estï¿½ comentada).
%    - Modificar el Makefile y descomentar las lineas
%      -makeindex $(NOMBRE_LATEX)
%      pare que se genere el ï¿½ndice de palabras.
%
% No se ha  hecho "oficial" este soporte (ni se  explica en el manual)
% porque no se ha probado en "producciï¿½n". No obstante, a continuaciï¿½n
% se describe su uso, tanto a nivel de configuraciï¿½n (mucho de lo cual
% TeXiS ya hace) como a nivel del usuario:


% Permite crear  ï¿½ndices (de palabras)  en LaTeX (es decir,  el ï¿½ndice
% que suele  haber al final de  los libros diciendo en  quï¿½ pï¿½ginas se
% habla de quï¿½ tï¿½rminos). La  generaciï¿½n no es una cosa trivial...  Lo
% primero que hay que hacer  es poner '\makeindex' en el preï¿½mbulo del
% documento (antes del  \begin{document}), luego poner \index{entrada}
% a lo largo  de todo el documento para  indicar quï¿½ palabras queremos
% que  aparezcan en  el ï¿½ndice  temï¿½tico.  Por ï¿½ltimo,  hay que  poner
% \printindex en  el lugar donde queramos  que se genere  y muestre el
% ï¿½ndice.

% Pero  eso no  es todo...  en realidad  la generaciï¿½n  del  ï¿½ndice se
% realiza con  una herramienta externa a LaTeX  llamada makeindex (que
% funciona  con  la  misma  "filosofï¿½a"  que bibtex,  como  una  etapa
% posterior).  Total, que  hay que ejecutar LaTeX una  primera vez, lo
% que  genera un  fichero  auxiliar  con extensiï¿½n  .idx  con toda  la
% informaciï¿½n sobre las  palabras que deben salir en  el ï¿½ndice. Luego
% se ejecuta  MakeIndex, que recoge  ese fichero y utiliza  un fichero
% con extensiï¿½n  .ist con informaciï¿½n  sobre estilo para  generar otro
% fichero,   esta   vez   con   extensiï¿½n  .ind   (que   supongo   que
% conceptualmente es  semejante al "bbl"  de BibTeX).  Por  ï¿½ltimo, se
% vuelve a  ejecutar LaTeX que  recompila el fichero y,  utilizando el
% .ind, mete por fï¿½n el ï¿½ndice bueno.

% Aconsejan NO  poner los \index  segï¿½n vas escribiendo  el documento,
% porque el ï¿½ndice que te queda seguramente sea un poco malo. En lugar
% de eso  dicen que utilices  "delatex" para sacar todas  las palabras
% que utilizas en tu  documento, luego las "limpies" decidiendo cuales
% quieres que aparezcan, y luego  metas todos los \index. En cualquier
% caso,  el  programa "delatex"  no  se  instala  con la  distribuciï¿½n
% habitual de latex.

% Puedes anular la generaciï¿½n del ï¿½ndice si quitas el \makeindex en el
% preï¿½mbulo (supongo que no se generarï¿½ el .idx).
 
% http://www.mpi.nl/world/persons/private/robstu/latex/how_to/indexes.html
% http://ipagwww.med.yale.edu/latex/makeindex.pdf

\usepackage{makeidx}


% Paquete de  depuraciï¿½n. Se si utiliza,  en el margen  de cada pï¿½gina
% aparecen  las palabras  que se  aï¿½adirï¿½n  al ï¿½ndice  de esa  pï¿½gina.
% Pero... parece que no funciona con el pdflatex de Linux :'( En lugar
% de sacar las palabras en la esquina de la pï¿½gina la saca en el sitio
% donde estï¿½n insertadas, en mitad del pï¿½rrafo... y claro, es un tanto
% caï¿½tico :'(
% Por  eso, aunque  estemos en  modo "depuraciï¿½n",  si  estamos usando
% pdflatex no se incluye.

\ifpdf
\else
   \ifx\release\undefined
      \usepackage{showidx}
   \fi
\fi

%\citeindextrue Activa la apariciï¿½n de las referencias en el ï¿½ndice
%\citeindexfalse La desactiva


% Para pedir que se genere  la informaciï¿½n para el ï¿½ndice de palabras.
% Para  no  ralentizar la  compilaciï¿½n,  sï¿½lo  se  genera cuando  estï¿½
% definido el sï¿½mbolo correspondiente.
\ifx\generaindice\undefined
\else
\makeindex
\fi

% Pruebas con ï¿½ndices
%\usepackage{index}
%\newindex{default}{idx}{ind}{ï¿½ndice}
%\newindex{cite}{cdx}{cnd}{ï¿½ndice de citas}
%\renewcommand{\citeindextype}{cite}
%\citeindextrue


% Otro paquete  de depuraciï¿½n, para mostrar las  etiquetas del \label,
% etc. Se  puede desactivar  el mostrado de  algunas de ellas  con las
% opciones [notref]  y [notcite].  Lo tengo  desactivado, porque queda
% demasiado  cargado.   Ademï¿½s,  provoca  errores de  compilaciï¿½n  con
% algunas figuras  convertidas desde eps  a pdf cuando se  compila con
% pdflatex.

\ifx\release\undefined
%\usepackage{showkeys}
\fi


% Para poder utilizar el entorno multicol, ï¿½til en los sitios donde se
% quieren poner dos figuras una al lado de la otra.
\usepackage{multicol}

%
% Para  poder poner  "subfiguras". El  paquete permite  incluir varias
% figuras dentro  de un entorno  flotante (tï¿½picamente una  figura), y
% puede  etiquetar  cada  una  con  una letra,  y  asociar  diferentes
% descripciones a cada una.
%
% La idea  es crear  un entorno figura  tradicional, pero no  poner en
% ella  directamente  el  \includegraphics  (o  cualquier  otra  cosa,
% vamos), sino subdividir ese entorno  figura en varias partes. A cada
% una  de   ellas  se  le   da  una  etiqueta  diferente   para  poder
% referenciarlas, una descripciï¿½n, etcï¿½tera.  Un ejemplo:
%
% \begin{figure}[t]
%   \centering
%   %
%   \subfloat[<ParaElIndice1>][<Caption1>]{ 
%      % Contenido para este "subelemento" (podrï¿½ ser una
%      % figura, una tabla, o cualquier otra cosa).
%      \includegraphics[width=5cm]{ficheroSinExtension}
%      \label{fig:etiqueta1}
%   }
%   \subfloat[<ParaElIndice2>][<Caption2>]{
%      % Contenido para este "subelemento" (podrï¿½ ser una
%      % figura, una tabla, o cualquier otra cosa).
%      \includegraphics[width=5cm]{ficheroSinExtension}
%      \label{fig:etiqueta2}
%   }
%  \caption{Descripciï¿½n global para la figura}
%  \label{Etiqueta para toda la figura}
% \end{figure}
%
% El sistema  automï¿½ticamente decide cuando poner  la siguiente figura
% al lado, o  en otra linea. Es  posible forzar a que se  ponga en una
% linea nueva si se deja una linea en blanco en el .tex. Esto tiene la
% repercusiï¿½n  de que  no deberï¿½as  dejar lineas  en blanco  en ningï¿½n
% momento dentro  del entorno flotante,  para evitar que se  "salte de
% linea"  en las  figuras.  Si quieres  por  legilibidad dejar  alguna
% linea, pon un comentario vacio.
%
% La separaciï¿½n  entre dos figuras/tablas  que se colocan en  la misma
% fila puede ser demasiado pequeï¿½a. Para seprarlas un poco mï¿½s, puedes
% poner \qquad entre el cierre llaves de un \subfloat y el siguiente:
%
% [...]
%    \subfloat[..][..]{ ... }
%    \qquad
%    \subfloat[..][..]{ ... }
% [...]
%
% Por otro lado,  el \subfloat tiene dos "parï¿½metros",  que se colocan
% entre   corchetes    justo   despuï¿½s.   En    realidad   ambos   son
% opcionales. Podrï¿½amos poner directamente:
%
% \subfloat{ <comandos para el subelemento> }
%
% pero en ese caso no se etiquetarï¿½ con una letra.
%
% El texto que se pone entre los primeros corchetes se utiliza para el
% ï¿½ndice de figuras. En teorï¿½a, se mostrarï¿½ en dicho ï¿½ndice primero la
% descripciï¿½n global de la figura,  y luego la de cada subelemento. Si
% no  quieres que  ocurra,  deja  en blanco  el  contenido del  primer
% corchete. En la  prï¿½ctica... yo he puesto una cadena  y no ha salido
% en el ï¿½ndice.
% El  segundo  corchete  recibe   el  texto  con  la  descripciï¿½n  del
% subelemento,   es  decir  lo   que  aparecerï¿½   junto  a   la  letra
% identificativa.  Si lo  dejas vacï¿½o  (pero poniendo  los corchetes),
% saldrï¿½ la letra, sin texto.  Si ni siquieras pones los corchetes, no
% saldrï¿½ tampoco la letra.
%
% Para referenciar  uno de los subelementos  basta con \ref{etiqueta},
% siendo  la   etiqueta  una  definida  mediante   \label  DENTRO  del
% \subfloat. La  forma de salir  serï¿½, por ejemplo, 2.3a  Si prefieres
% que salga  2.3 (a) (o quieres poner  "en la imagen (a)  de la figura
% 2.3...")  puedes  utilizar  \subref{etiquitaDeSubelemento}.  \subref
% escribirï¿½ el (a).  Combinï¿½ndolo con la etiqueta global  de la figura
% (del  entorno flotante contenedor,  vamos) que  mostrarï¿½ el  2.3 del
% ejemplo, puedes hacer cosas como la anterior con facilidad.
%
% Se pueden hacer muchas mï¿½s pijadas, pero esto deberï¿½a ser suficiente
% la mayor parte de las veces. Mira el manual oficial para mï¿½s
% informaciï¿½n (ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/subfig/subfig.pdf)
%
% Por cierto,  este paquete es la  evoluciï¿½n de subfigure,  pero no es
% compatible con ï¿½l (por eso decidieron cambiarle el nombre).
\usepackage{subfig}

% El  paquete anterior  tiene un  problema  cuando se  utiliza en  los
% subfloat entornos verbatim (eso incluye a los lstlistings), debido a
% que  no  se  pueden  anidar  entornos verbatim  (bueno,  esa  es  la
% explicaciï¿½n que  he encontrado,  aunque no tenï¿½a  ni idea de  que se
% estuvieran anidando entornos verbatim :-) ).

% Para  arreglarlo, en la  documentaciï¿½n de  subfig dan  una soluciï¿½n,
% creando un  nuevo entorno,  SubFloat, que estï¿½  en una caja  LaTeX o
% algo  asï¿½, y que  consigue poder  meterlos. El  entorno se  define a
% continuaciï¿½n  (cortar  y  pegar  de  la  documentaciï¿½n  del  paquete
% subfig).
%
% Los dos parï¿½metros que tenï¿½amos  antes para el \subfloat (caption, y
% caption para el ï¿½ndice) ahora se pasan de forma distinta:
%
% \begin{SubFloat}[texto indice]{Texto figura\label{<etiqueta>}
%    <contenido>
% \end{SubFloat}
%
% Es decir, hay que poner la etiqueta directamente en el parï¿½metro del
% entorno.
%
% Para que el SubFloat funcione,  hay que hacer algo mï¿½s, no obstante,
% ya que el entorno verbatim  (y lstlisting) NO definen en su creaciï¿½n
% lo que ocupan, y por lo tanto el \subfloat no es capaz de determinar
% cï¿½mo colocar las  subfiguras, ya que no conoce  su tamaï¿½o. Para eso,
% el entorno verbatim (o lstlisting)  hay que enmarcarlo dentro de una
% minipage en la que sï¿½ definimos (a mano) el tamaï¿½o. Un ejemplo puede
% ser:
%
% \begin{SubFloat}{\label{fig:ejercicios1a3:2}Ejercicio 2}%
% \begin{minipage}{0.4\linewidth}%
% \begin{lstlisting}[frame=tb]
% public void f(int b) {
%     int a;
%     a = 3 + b;
% }
% \end{lstlisting}%
% \end{minipage}
% \end{SubFloat}
%
% De esta  forma, se  hace que  el cï¿½digo en  el lstlisting  ocupe dos
% quintas  partes del ancho  de la  pï¿½gina.  Se  podrï¿½a pensar  que es
% posible  utilizar  el  "parï¿½metro"  linewidth  del  lstlisting,  que
% permite     tambiï¿½n     indicar      el     ancho     del     cï¿½digo
% (\begin{lstlisting}[frame=tb,linediwth=0.4\linewidth]; sin embargo,
% eso  no es  posible ya  que ese  ancho es  utilizado por  el entorno
% lstlisting para  dibujar el marco  y, si tiene activado  el "romper"
% las lï¿½neas  automï¿½ticamente, para romperlas; si todas  las lï¿½neas de
% cï¿½digo  son mï¿½s  cortas que  ese  espacio, el  espacio efectivo  del
% cï¿½digo serï¿½ el ancho de la lï¿½nea mï¿½s ancha.
%
% Otra desagradable sorpresa surge  con los subfloat: existe un margen
% a los  lados del ï¿½rea reservada  a la subfigura, para  que no queden
% todas  pegadas.   Esto  estï¿½  bien,  porque asï¿½  no  tienes  tï¿½  que
% encargarte de  definir el espacio; simplemente  decides cuï¿½nto ocupa
% de ancho cada  subfigura, y ï¿½l se encarga de  colocarlo todo. Lo que
% ocurre es que parece no tener  en cuenta que, cuando a la derecha de
% un subfloat NO hay otro (porque es el ï¿½ltimo de la "lï¿½nea"), _sigue_
% poniendo  el espacio  en blanco  para  separar con  el siguiente  (e
% inexistente) subfloat, lo  que hace que, en caso  de estar centrando
% los elementos, no quede perfectamente centrado :(

\makeatletter
\newbox\sf@box
\newenvironment{SubFloat}[2][]%
{\def\sf@one{#1}%
\def\sf@two{#2}%
\setbox\sf@box\hbox
\bgroup}%
{ \egroup
\ifx\@empty\sf@two\@empty\relax
\def\sf@two{\@empty}
\fi
\ifx\@empty\sf@one\@empty\relax
\subfloat[\sf@two]{\box\sf@box}%
\else
\subfloat[\sf@one][\sf@two]{\box\sf@box}%
\fi}
\makeatother


% Para poder  incluir cï¿½digo  fuente resaltado fï¿½cilmente.   El tamaï¿½o
% bï¿½sico de la letra, pequeï¿½o.
% Lo que aparece comentado era origienal de TeSiX
%\usepackage{listings}
%\lstset{basicstyle=\small}
%\lstset{showstringspaces=false}
%\lstset{tabsize=3}
% Aquï¿½ comienza lo aï¿½adido por Ramiro Utrilla el 5 de junio de 2011
\usepackage{color}
\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
\usepackage{listings}
\lstset{ frame=Ltb,
     framerule=0pt,
     aboveskip=0.5cm,
     framextopmargin=3pt,
     framexbottommargin=3pt,
     framexleftmargin=0.4cm,
     framesep=0pt,
     rulesep=.4pt,
     backgroundcolor=\color{gray97},
     rulesepcolor=\color{black},
     %
     stringstyle=\ttfamily,
     showstringspaces = false,
     basicstyle=\small\ttfamily,
     commentstyle=\color{gray45},
     keywordstyle=\bfseries,
     %
     numbers=left,
     numbersep=15pt,
     numberstyle=\tiny,
     numberfirstline = false,
     breaklines=true,
   }
% minimizar fragmentado de listados
\lstnewenvironment{listing}[1][]
   {\lstset{#1}\pagebreak[0]}{\pagebreak[0]}
 
\lstdefinestyle{consola}
   {basicstyle=\scriptsize\bf\ttfamily,
    backgroundcolor=\color{gray75},
   }
 
\lstdefinestyle{C}
   {language=C,
   }
% Aquï¿½ finaliza lo aï¿½adido por Ramiro Utrilla el 5 de junio de 2011


% Para poder utilizar el entorno tabularx, que sirve para hacer tablas
% con  pï¿½rrafos, sin tener  que indicar  el ancho  de cada  columna de
% pï¿½rrafo particular.
\usepackage{tabularx}

% Definimos  los  nombres para  las  tablas  y  el ï¿½ndice  de  tablas,
% sobreescribiendo los de babel, que los llama 'cuadros'.
\addto\captionsspanish{%
  \def\tablename{Tabla}%
  \def\listtablename{Lista de Tablas}%
  \def\figurename{Figura}%
  \def\listfigurename{Lista de Figuras}%
  \def\contentsname{Índice}%
  \def\chaptername{Capitulo}%
}


% Supuestamente,  codificaciï¿½n   que  tiene  'nativas'   las  palabras
% acentuadas,  para poder  tener guionado  de palabras  con acentos...
% aunque no estoy yo demasiado seguro...
\usepackage[T1]{fontenc}

% Paquete para poder utilizar figuras EPS
\usepackage{epsfig}
%\usepackage[dvips]{graphicx}
%http://www.cidse.itcr.ac.cr/revistamate/HERRAmInternet/Latex/wmlatexrevista/node19.html

% Hacemos que los  pï¿½rrafos se separen con algo mï¿½s  de espacio que lo
% habitual.
\setlength{\parskip}{0.2ex}

% El paquete  psboxit permite poner  una imagen Post Script  dentro de
% una  caja de  TeX. La  imagen se  parametriza con  la posiciï¿½n  y el
% tamaï¿½o de la caja TeX.

%\usepackage{psboxit}

% Permite hacer cï¿½lculos sencillos dentro  de un documento de LaTeX Lo
% necesitamos en  la portada, para  poder ajustar los mï¿½rgenes  con un
% poco de independencia  del tamaï¿½o de la pï¿½gina.  Consulta el fichero
% portada.tex para mï¿½s informaciï¿½n.
\usepackage{calc}

% Define el entorno  longtable que sirve para crear  tablas que ocupan
% mï¿½s de una pï¿½gina.

%\usepackage{longtable}

% Cuando en una tabla tenemos lineas dobles de separaciï¿½n entre filas
% y columnas, LaTeX las pinta de manera que dï¿½ la sensaciï¿½n de que
% cada celda es un rectï¿½ngulo:
%          | |
%  [celda] | | [celda]
%          | |
% ---------+ +---------
%                       <- hueco entre lineas
% ---------+ +---------
%          | |
%  [celda] | | [celda]
%          | |
%
% Si queremos que las lï¿½neas se corten:
%          | |
%  [celda] | | [celda]
%          | |
% ---------+-+---------
%          | |          <- hueco entre lineas
% ---------+-+---------
%          | |
%  [celda] | | [celda]
%          | |
%
% podemos utilizar el paquete hhline, que permite concretar en gran
% medida cï¿½mo queremos que queden los cruces
% (http://www.cs.wright.edu/~jslater/hhline.pdf)
%
% Otro uso interesante de hhline es como sustitutivo de \cline. \cline
% (nativo de LaTeX) permite poner lineas de separaciï¿½n entre filas que
% no englobe  a todas las  columnas. El problema  es que \cline  no se
% lleva bien con celdas con  fondo de color, porque queda _debajo_ del
% relleno y no se ve. \hhline sin embargo queda por encima, por lo que
% puede utilizarse para pintar lineas sencillas sin preocuparnos de la
% interacciï¿½n  con las lï¿½neas  horizontales (quizï¿½  tambiï¿½n sencillas)
% pero aprovechar  que sï¿½ van a  verse.  En concreto, en  una tabla de
% cuatro columnas  \cline{1-3} es  similar a \hhline{----~}  (el guiï¿½n
% indica  que  queremos  lï¿½nea para  esa  columna,  y  el ~  que  no).
% \usepackage{hhline}


% \usepackage[verbose]{geometry}
% \geometry{a4paper}
% \geometry{twosideshift=0pt}
% \geometry{top=4cm,bottom=4cm,left=3cm,right=3cm,headsep=1cm}

%
% Paquete para  poder ampliar las  opciones de las tablas,  para poder
% tener pï¿½rrafos  dentro de una celda  y que nos los  ajuste el propio
% LaTeX.
%
%\usepackage{tabulary}
% Otras opciones anteriores
%\usepackage{tabularx}  % Este estï¿½ incluï¿½do por arriba
%\usepackage{array}

%\usepackage{slashbox}
% Para poder poner lï¿½neas diagonales en una tabla:
%
% \ b|  
%  \ |  ...
% a \|
% ---+----------
%    |
%    |
%
% En la casilla a dividir, \backslashbox{a}{b} & ...
% Vamos... no queda muy bien... en algï¿½n sitio vi que para mejorar un
% poco el aspecto se podï¿½a incluï¿½r pict2e tambiï¿½n, aunque en cualquier
% caso el resultado podï¿½a seguir siendo discutible.

%
% Paquete para poder poner celdas de colores en una tabla
%
%\usepackage{colortbl}
%\usepackage{color}


% Paquete  que permite  cambiar  el formato  en  el que  se ponen  los
% tï¿½tulos   de   capï¿½tulos,  secciones,   etc.    Tambiï¿½n  define   el
% comando \chaptertitlename, que  equivale a \chaptername ("Capï¿½tulo")
% cuando se estï¿½  dentro de un capï¿½tulo o  a \apendixname ("Apï¿½ndice")
% cuando se  estï¿½ en un apï¿½ndice.  Eso se utiliza en  la definiciï¿½n de
% las cabeceras.
\usepackage{titlesec}


% Cambio del tï¿½tulo de los capï¿½tulos (sacado de
% http://aristarco.dnsalias.org/book/export/html/13)

% \newcommand{\bigrule}{\titlerule[0.5mm]}

% \titleformat{\chapter}[display] % cambiamos el formato de los capï¿½tulos
% {\bfseries\Huge} % por defecto se usarï¿½n caracteres de tamaï¿½o \Huge en negrita
% {% contenido de la etiqueta
%  \titlerule % lï¿½nea horizontal
%  \filleft % texto alineado a la derecha
%  \Large\chaptertitlename\ % "Capï¿½tulo" o "Apï¿½ndice" en tamaï¿½o \Large en lugar de \Huge
%  \Large\thechapter} % nï¿½mero de capï¿½tulo en tamaï¿½o \Large
% {0mm} % espacio mï¿½nimo entre etiqueta y cuerpo
% {\filleft} % texto del cuerpo alineado a la derecha
% [\vspace{0.5mm} \bigrule \vspace{1cm}] % despuï¿½s del cuerpo, dejar espacio vertical y trazar lï¿½nea horizontal gruesa


% Variable local para emacs, para  que encuentre el fichero maestro de
% compilaciï¿½n y funcionen mejor algunas teclas rï¿½pidas de AucTeX

%%%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../Tesis.tex"
%%% End:

